<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.articles.ReSortsDao">
  <resultMap id="ReSortsResultMap" type="com.domain.articles.ReSorts">
    <id column="sort_id" jdbcType="BIGINT" property="sortId" />
    <result column="sort_name" jdbcType="VARCHAR" property="sortName" />
    <result column="sort_alias" jdbcType="VARCHAR" property="sortAlias" />
    <result column="parent_sort_id" jdbcType="VARCHAR" property="parentSortId" />
    <result column="sort_description" jdbcType="LONGVARCHAR" property="sortDescription" />
  </resultMap>

  <!-- 分类的分页模糊查询 -->
  <select id="SortsPagingFuzzyQuery" parameterType="ReSorts" resultMap="ReSortsResultMap">
    SELECT * FROM re_sorts WHERE sort_name LIKE '%${sortName}%'
  </select>

  <!-- 删除分类 -->
  <delete id="deleteSorts" parameterType="ReSorts">
    DELETE FROM re_sorts WHERE sort_id = #{sortId}
  </delete>

  <!-- 添加分类 -->
  <insert id="addSorts" parameterType="ReSorts">
    INSERT INTO re_sorts VALUES(NULL,#{sortName},#{sortAlias},#{parentSortId},#{sortDescription})
  </insert>

  <!-- 修改分类 -->
  <update id="updateSorts" parameterType="ReSorts">
    UPDATE re_sorts SET sort_name = #{sortName} , sort_alias = #{sortAlias} , parent_sort_id = #{parentSortId} , sort_description = #{sortDescription} WHERE sort_id = #{sortId}
  </update>

  <!-- 获取分类树形菜单 -->
  <select id="SortsTreeMenu" resultMap="ReSortsResultMap">
    SELECT * FROM re_sorts
  </select>

</mapper>